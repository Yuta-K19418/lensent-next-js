AWSTemplateFormatVersion: "2010-09-09"
Description: Create Host Zone For LenSentNextjsApp

Parameters:
  HostedZoneName:
    Description: domain name.
    Type: String

Resources:
  Route53HostedZone:
    Type: AWS::Route53::HostedZone
    Properties:
      Name: !Sub "${HostedZoneName}"
  route53RSGroup:
    Type: AWS::Route53::RecordSetGroup
    Properties:
      HostedZoneId: !Ref Route53HostedZone
      RecordSets:
        - Name: !Sub "www.${HostedZoneName}."
          AliasTarget:
            HostedZoneId: !ImportValue InternetALBHostZoneId
            DNSName: !ImportValue InternetALBEndpoint
          Type: A
        - Name: !Sub "www.${HostedZoneName}."
          Type: CNAME
          TTL: "900"
          Weight: "4"
          ResourceRecords:
            - !Sub "www.${HostedZoneName}."

Outputs:
  HostedZone:
    Value: !Ref Route53HostedZone
    Export:
      Name: HostedZoneId
  Domain:
    Value: !ImportValue InternetALBEndpoint
    Export:
      Name: DomainName
